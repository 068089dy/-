## 1.新建一个java文件
```
package jnilib;
public class TestJNI{
    public native void sayHello();
}
```
## 2.编译
```
$ javac -d . TestJNI.java
```
## 3.生成一个TestJNI.h文件
```
$ javah jnilib.TestJNI
```
然后会生成一个jnilib_TestJNI.h文件:
```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class jnilib_TestJNI */

#ifndef _Included_jnilib_TestJNI
#define _Included_jnilib_TestJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     jnilib_TestJNI
 * Method:    sayHello
 * Signature: ()V
 * 这就是java文件中申明的的sayHello()方法
 */
JNIEXPORT void JNICALL Java_jnilib_TestJNI_sayHello
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endi
```
## 4.实现sayello()方法
新建一个c文件TestJNI.c：
```
#include <stdio.h>
#include "TestJNI.h"

JNIEXPORT void JNICALL Java_jnilib_TestJNI_sayHello(JNIEnv *env, jobject object){
    printf("Hello World!\n");
}
```
## 5.生成.so动态库文件
$ gcc -I/home/dy/bin/jdk1.8.0_131/include -I/home/dy/bin/jdk1.8.0_131/include/linux -fPIC -c TestJNI.c
然后就生成的一个TestJNI.o的文件
$ gcc TestJNI.o -o libhello.so -shared
生成了libhello.so文件
## 6.使用
新建一个Demo.java文件：
```
import jnilib.TestJNI;

public class Demo{
  static{
            try{
              //libhello.so路径
                System.load("/home/dy/code-floder/java/jni/libhello.so");
            }catch(UnsatisfiedLinkError e){
                System.err.println("Native code library failed to load.\n" + e);
                System.exit(1);
            }
        }


  public static void main(String[] args) {
        TestJNI test = new TestJNI();
        test.sayHello();
    }
}
```
编译并执行，结果如下：
```
$ javac Demo.java
$ java Demo
Hello World!
```
